## Create a relational database

Let's create a relational database with multiple tables for the deliveries of a restaurant. 

1. Define table and columns
   
<details>

  <summary>Details</summary>
  

```
Let's first define all the tables and their columns. 
```
Code

```ruby

CREATE TABLE Order (

id INTEGER PRIMARY KEY,
recipe_id INTEGER REFERENCES recipe(id),
customer_id INTEGER REFERENCES customer(id),
price REAL, 
comment VARCHAR(100)
);

CREATE TABLE Customer (
id INTEGER PRIMARY KEY,
name VARCHAR(20),
telephone CHAR(10),
allergens VARCHAR(20),
delivery BOOLEAN
);

CREATE TABLE Recipe (
id INTEGER PRIMARY KEY,
name VARCHAR(10),
ingredients VARCHAR(100),
link VARCHAR(20),
allergens VARCHAR(20),
price REAL
);

CREATE TABLE rating (
customer_id INTEGER REFERENCES customer(id),
recipe_id INTEGER REFERENCES recipe(id),
rating REAL,
PRIMARY KEY (customer_id, recipe_id)
);

CREATE TABLE customer_address (
customer_id INTEGER REFERENCES customer(id),
street_name VARCHAR(20),
city VARCHAR(15),
state VARCHAR(15)
);

```
</details>



2. Let's double-check

<details>

  <summary>Details</summary>
  

```
Let's make sure that all the tables and PK/FK were created correctly. 
```
Code

```ruby

SELECT 
    constraint_name, table_name, column_name
  FROM
    information_schema.key_column_usage
  WHERE
    table_name = 'Order';

SELECT 
    constraint_name, table_name, column_name
  FROM
    information_schema.key_column_usage
  WHERE
    table_name = 'Customer';

SELECT 
    constraint_name, table_name, column_name
  FROM
    information_schema.key_column_usage
  WHERE
    table_name = 'Recipe';

SELECT 
    constraint_name, table_name, column_name
  FROM
    information_schema.key_column_usage
  WHERE
    table_name = 'Rating';

SELECT 
    constraint_name, table_name, column_name
  FROM
    information_schema.key_column_usage
  WHERE
    table_name = 'Customer_address';

```
</details>

3. Check that PK and FK actually work. Join the tables

<details>

  <summary>Answer</summary>
  

```
XXXXXXXXXXXXX
```
Code

```ruby

JOIN THEM

```
</details>

5. Relate 2 tables in a Many-to-Many Relationship database via a cross-reference table

<details>

  <summary>Answer</summary>
  

```
Create a A third cross-reference table, recipes_ingredients, will support the following columns:

recipe_id (foreign key referencing recipe table’s id)(primary key)
ingredient_id (foreign key referencing ingredient table’s id) (primary key)
Both recipe_id and ingredient_id also serve as a composite primary key for recipes_ingredients.

```
![image](https://github.com/alexalra/Portfolio-2/assets/78654579/37211125-eedd-4b29-aefd-4aa8bb154fb4)

Code

```ruby

CREATE TABLE books_authors (

  book_isbn VARCHAR(50) REFERENCES book(isbn),
  author_email VARCHAR(20) REFERENCES author(email),
  PRIMARY KEY (book_isbn, author_email)
);

```
</details>
