## Questions

Let's ask some questions to explore that database and see how the deliveries of this restaurant are going.

1. Which recipe generated more revenues? 

<details>

  <summary>Answer</summary>
  

```
BBQ Feast
```
Code

```ruby

SELECT
  recipe.name, SUM(orders.price)
FROM
  recipe
JOIN
  orders 
ON
  recipe.id = orders.recipe_id
GROUP BY
  1
ORDER BY
  2 DESC;
```
![image](https://github.com/alexalra/Portfolio-2/assets/78654579/1d309813-3fa4-4285-8bf9-27bdefa8538a)

</details>


2. How many customers ordered food containing ingredients they are allergic to? 

<details>

  <summary>Answer</summary>
  

```
XXXXXXXXXXXXX
```
Code

```ruby

SELECT customer.allergens, recipe.ingredients
FROM recipe
JOIN orders 
ON recipe.id = orders.recipe_id
JOIN customer
ON orders.customer_id = customer.id
WHERE recipe.ingredients LIKE '%fish%' OR
recipe.ingredients LIKE '%pork%' OR 
recipe.ingredients LIKE '%mayo%' OR
recipe.ingredients LIKE '%almonds%'


```
</details>

3. The orders.price is always higher than recipe.price. That is because orders.price includes the cost of the delivery. Calculate exactly how much every customer paid for the delivery. 

<details>

  <summary>Answer</summary>
  

```
See below the price of every delivery. 
```
Code

```ruby

SELECT orders.id,
ROUND(orders.price - recipe.price,2) AS DELIVERY_PRICE
FROM recipe
JOIN orders
ON recipe.id = orders.recipe_id


```
![image](https://github.com/alexalra/Portfolio-2/assets/78654579/30fe6f67-8060-4a91-8807-eae0d2067279)

</details>

4. Let's insert a column to the orders table to reflect the cost of each delivery.

<details>

  <summary>Answer</summary>
  

```
XXXXXXXXXXXXX
```
Code

```ruby

SELECT 
  ROUND(SUM(UnitPrice * Quantity), 2) AS SALES
FROM 
  InvoiceLine; 

```
</details>


5. Which is the name of the customer that gave the highest rating?

<details>

  <summary>Answer</summary>
  

```
XXXXXXXXXXXXX
```
Code

```ruby

SELECT 
  ROUND(SUM(UnitPrice * Quantity), 2) AS SALES
FROM 
  InvoiceLine; 

```
</details>
